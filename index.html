<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>부가세 신고 도우미</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="app-header">
    <h1>부가세 신고 도우미</h1>
    <nav class="steps">
      <span class="step is-active">1. 로그인</span>
      <span class="step">2. 자료수집</span>
      <span class="step">3. 검토</span>
      <span class="step">4. 신고파일</span>
      <span class="step">5. 홈택스 제출</span>
    </nav>
  </header>

  <main class="container">
    <!-- 섹션 A. 카카오 로그인 -->
    <section id="login-section" class="card">
      <h2>카카오로 시작</h2>
      <p class="muted">사업자 확인과 알림 발송을 위해 카카오 로그인이 필요합니다.</p>
      <button id="btnKakao" class="btn primary">카카오로 로그인</button>
      <div id="loginStatus" class="status"></div>
    </section>

    <!-- 섹션 B. 약관/동의 -->
    <section id="consent-section" class="card hidden">
      <h2>동의 사항</h2>
      <label class="checkbox"><input type="checkbox" id="agreeScrape" /> 홈택스 매출/매입 자료 수집에 동의합니다.</label>
      <label class="checkbox"><input type="checkbox" id="agreePrivacy" /> 개인정보 처리방침에 동의합니다.</label>
      <div class="row">
        <button id="btnConsent" class="btn">동의하고 계속</button>
      </div>
    </section>

    <!-- 섹션 C. 홈택스 인증 정보 입력(프록시/RPA 연동 전 단계) -->
    <section id="hometax-section" class="card hidden">
      <h2>홈택스 연결</h2>
      <p class="muted">인증 방식 선택</p>
      <div class="grid2">
        <label class="radio"><input type="radio" name="authType" value="certificate" checked /> 공동/금융 인증서</label>
        <label class="radio"><input type="radio" name="authType" value="idpw" /> 아이디/비밀번호</label>
      </div>
      <div class="row">
        <button id="btnConnectHometax" class="btn">홈택스 연결 시도</button>
        <span id="hometaxStatus" class="status"></span>
      </div>
      <p class="tip">실서비스에서는 이 버튼이 서버의 RPA/연동 API를 호출합니다.</p>
    </section>

    <!-- 섹션 D. 데이터 수집/프로그레스 -->
    <section id="progress-section" class="card hidden">
      <h2>자료 수집 진행상태</h2>
      <progress id="scrapeProgress" value="0" max="100"></progress>
      <div id="progressLog" class="log"></div>
    </section>

    <!-- 섹션 E. 데이터 미리보기 -->
    <section id="preview-section" class="card hidden">
      <h2>매출/매입 요약</h2>
      <div class="grid2">
        <div>
          <h3>매출 합계</h3>
          <div id="salesTotal" class="kpi">-</div>
          <table id="salesTable" class="table"></table>
        </div>
        <div>
          <h3>매입 합계</h3>
          <div id="purchaseTotal" class="kpi">-</div>
          <table id="purchaseTable" class="table"></table>
        </div>
      </div>
      <div class="row">
        <button id="btnMakeReturn" class="btn primary">부가가치세 신고서 생성</button>
      </div>
    </section>

    <!-- 섹션 F. 신고서/전자파일 생성 -->
    <section id="return-section" class="card hidden">
      <h2>신고서 결과</h2>
      <div class="grid2">
        <div>
          <h3>요약</h3>
          <ul id="returnSummary" class="list"></ul>
        </div>
        <div>
          <h3>전자파일</h3>
          <button id="btnDownloadXml" class="btn">전자파일(XML) 다운로드</button>
          <button id="btnDownloadPdf" class="btn">미리보기(PDF)</button>
        </div>
      </div>
      <div class="row">
        <button id="btnSubmitHometax" class="btn">홈택스에 신고</button>
        <span id="submitStatus" class="status"></span>
      </div>
    </section>
  </main>

  <footer class="app-footer">
    <small>ⓒ VAT Assistant</small>
  </footer>

  <!-- 카카오 SDK: 실제 키로 교체 필요 -->
  <!-- <script src="https://developers.kakao.com/sdk/js/kakao.min.js"></script> -->
  <script src="script.js"></script>
</body>
</html>
